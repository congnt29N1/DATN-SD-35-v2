
<section class="main-content-section" ng-controller="historyChoCtrl">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <h2 class="page-title">Đơn hàng</h2>
            </div>


            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="   box-shadow: #bbbbc1 -1px 0px 5px 0px;">
                <div class="tracking">
                    <nav>
                        <ul class="list-tracking" >
                            <ul class="list-tracking" >
                                <li ><a href="#history/all"  data-toggle="tab">Tất cả</a> </li>
                                <li class="active"><a href="#history/0"  data-toggle="tab">Chờ xác nhận </a> </li>
                                <li><a href="#history/1"  data-toggle="tab">Đang chuẩn bị </a> </li>
                                <li > <a href="#history/2"  data-toggle="tab">Đang giao hàng</a> </li>
                                <li> <a href="#history/3" data-toggle="tab">Hoàn thành</a></li>
                                <li > <a href="#history/4" data-toggle="tab">Đã hủy</a></li>
                                <li > <a href="#history/5"  data-toggle="tab">Trả hàng/hoàn hiền</a> </li>
                            </ul>
                        </ul>
                    </nav>
                </div>
            </div>

            <div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12 tab-content" >
                    <div ng-if="donHang.length == 0" >
                        <div style="text-align: center; margin-top: 100px;">
                            <img src="/assets/images/nothing-to-show.png" width="15%" alt=""></div>
                        <div style="text-align: center; margin: 10px 0">Chưa có đơn hàng </div>
                    </div>
                <div ng-if="donHang.length > 0">
                    <div class="shipping-cart"  when-scrolled="more()" style=" height:550px; color: red; overflow-x:auto;" >
                        <div ng-repeat="item in donHang " style="padding: 10px 0; margin: 20px 0; box-shadow: black 1px 1px 4px;">
                            <br>
                            <div style="font-size: medium; padding: 0 10px;position: relative">
                                <div >Mã đơn hàng : {{item.maDonHang}}</div>
                                <div >Ngày Tạo : {{item.ngayTao | date : "short"}}</div>
                                <div ng-show="item.diaChi != null"> Địa Chỉ : {{item.diaChi}}, {{item.phuongXa}} - {{item.quanHuyen}} -  {{item.tinhThanh}}</div>
                                <span style="position: absolute; right: 32px;top: 10px;color: #3ab19c;text-transform: uppercase;">Chờ xác nhận</span>
                            </div>
                            <div class="shipping-item"  ng-repeat="h in item.hoaDonChiTiets" style="line-height: 22px; padding: 10px;">
                                <!--                            <span class="cross-icon" ng-click="removeSP(item)"><i class="fa fa-times-circle"></i></span>-->
                                <div class=" shipping-item-image" style="width: 10%">
                                    <a href="#/chitietsanpham/{{h.chiTietSanPham.sanPham.idSanPham}}"><img src="/assets/images/{{h.chiTietSanPham.sanPham.listAnhSanPham[0].link}}" width="100%" alt="shopping image" /></a>
                                </div>
                                <div class="shipping-item-text"  style="width: 87%; float: right">
                                    <a href="#/chitietsanpham/{{h.chiTietSanPham.sanPham.idSanPham}}" class="pro-cat" style="font-size: 17px">{{h.chiTietSanPham.sanPham.tenSanPham}} </a>
                                    <div>{{h.soLuong}} <span class="pro-quan-x">x</span></div>
                                    <span class="pro-quality"><a href="#sanpham">Phân loại : {{h.chiTietSanPham.kichCo.tenKichCo}},{{h.chiTietSanPham.mauSac.tenMauSac}},{{h.chiTietSanPham.dayDeo.tenDayDeo}},{{h.chiTietSanPham.vatLieu.tenVatLieu}}</a></span>
                                    <ul class="price text-right" style="    position: absolute; right: 20px;top: 7px; " >
                                        <li class="price special-price"> {{h.giaBan * h.soLuong | number}} đ </li>
                                        <span ng-if="h.chietKhau == null"></span>
                                        <span ng-if="h.chietKhau != null">
										<li class="price-percent-reduction small">&nbsp;{{h.chietKhau}} %</li>
									     <li class="old-price">{{h.giaBan * 100 /(100- h.chietKhau) | number}} đ/1sp</li>
                                     </span>
                                    </ul>
                                </div>
                            </div>

                            <div style="width: 30%;margin-left: 650px  ">
                                <div class="shipping-total-bill" >
                                    <div class="cart-prices" style="border: none">
                                        <span class="shipping-cost" ng-show="item.phiVanChuyen != null">{{item.phiVanChuyen | number}} đ</span>
                                        <span class="shipping-cost" ng-show="item.phiVanChuyen == null">0 đ</span>
                                        <span>Vận chuyển</span>
                                    </div>
                                    <div class="total-shipping-prices" >
                                        <span class="shipping-total" ng-show="item.phiVanChuyen != null">{{item.tongTien + item.phiVanChuyen | number}} đ</span>
                                        <span class="shipping-cost" ng-show="item.phiVanChuyen == null">{{item.tongTien | number}} đ</span>

                                        <span>Tổng</span>
                                    </div>
                                </div>
                                <div class="shipping-checkout-btn" style="    padding: 0 10px 20px; background: none">
                                   <a type="button" ng-click="clickMe()" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#{{item.idDonHang}}" >
                                   Hủy
                                </a>

                                <!-- Modal -->
                                <div class="modal fade" id="{{item.idDonHang}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"c ng-controller="historyChoCtrl" >
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                <h4 class="modal-title" id="myModalLabel">Lý do bạn muốn hủy ?</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form>
                                                    <div class="radio">
                                                        <label>
                                                            <input type="radio" ng-model="lyDo" name="txtLydo" id="optionsRadios1" value=" Muốn thay đổi màu sắc, kích cỡ, số lượng,chất liệu ,..." >
                                                            Muốn thay đổi màu sắc, kích cỡ, số lượng,chất liệu ,...
                                                        </label>
                                                    </div>
                                                    <div class="radio">
                                                        <label>
                                                            <input type="radio" ng-model="lyDo" name="txtLydo" id="optionsRadios2" value="Muốn thay đổi địa chỉ">
                                                            Muốn thay đổi địa chỉ
                                                        </label>
                                                    </div>
                                                    <div class="radio disabled">
                                                        <label>
                                                            <input type="radio" ng-model="lyDo" name="txtLydo" id="optionsRadios3" value="K muốn mua nữa" >
                                                            K muốn mua nữa
                                                        </label>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInputEmail1">Lý do khác :</label>
                                                        <input type="text" class="form-control" id="exampleInputEmail1" ng-model="lyDoKhac" placeholder="Lý do khác">
                                                    </div>
                                                    <span class="text-danger">{{error}}</span>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" ng-click="huy(item)" style="background: red">Xác nhận</button>
                                            </div>
                                            </form>
                                        </div>
                                       </div>
                                    </div>
                                </div>
                        <!--     modal-->
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

            </div>

        </div>
    </div>
</section>
<!-- MAIN-CONTENT-SECTION END -->